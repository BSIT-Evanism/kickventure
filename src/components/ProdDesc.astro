---
const { idName } = Astro.props;
import CartComp from "../components/CartComp";

const res = await fetch(
  `https://psc2023.azurewebsites.net/api/collections/Products/records/${idName}`,
);

const data = await res.json();
console.log(data);
---

<div class="flex p-8">
  <CartComp client:only />
  <figure>
    <img
      src={`https://psc2023.azurewebsites.net/api/files/Products/${data.id}/${data.picture}`}
      alt={data.id}
      transition:name={data.id}
      class="mask mask-squircle"
    />
  </figure>
  <div class="w-auto h-auto card-body">
    <h1 class="card-title text-4xl" transition:name={data.product_name}>
      {data.product_name}
    </h1>
    <p class="text-2xl">{data.price} pesos</p>
    <div class="stats shadow">
      <div class="stat">
        <div class="stat-title">
          Remaining {data.stocks > 1 ? "stocks" : "stock"}
        </div>
        <div class="stat-value">
          {
            data.stocks > 1 ? (
              <p>{data.stocks}</p>
            ) : data.stocks === 1 ? (
              <p>LAST STOCK REMAINING</p>
            ) : (
              <p>Out of Stock</p>
            )
          }
        </div>
      </div>
    </div>

    <div
      class="card-actions translate-x-80 group-hover:translate-x-0 justify-end transition-all duration-300 ease"
    >
    </div>
  </div>
</div>
